<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx/17.0.2-ea" xmlns:fx="http://javafx.com/fxml/1" fx:controller="de.dienstplan.controller.HauptfensterController">
   <top>
      <VBox>
         <!-- MenÃ¼leiste -->
         <MenuBar fx:id="menuBar">
            <Menu text="Datei">
               <MenuItem fx:id="neuMenuItem" onAction="#onNeueDaten" text="Neue Daten..." />
               <SeparatorMenuItem />
               <MenuItem fx:id="importMenuItem" onAction="#onImport" text="Importieren..." />
               <MenuItem fx:id="exportMenuItem" onAction="#onExport" text="Exportieren..." />
               <SeparatorMenuItem />
               <MenuItem fx:id="einstellungenMenuItem" onAction="#onEinstellungen" text="Einstellungen" />
               <SeparatorMenuItem />
               <MenuItem fx:id="beendenMenuItem" onAction="#onBeenden" text="Beenden" />
            </Menu>
            
            <Menu text="Bearbeiten">
               <MenuItem fx:id="personHinzufuegenMenuItem" onAction="#onNeuePersonHinzufuegen" text="Neue Person..." />
               <MenuItem fx:id="dienstplanErstellenMenuItem" onAction="#onNeuerDienstplan" text="Neuer Dienstplan..." />
               <SeparatorMenuItem />
               <MenuItem fx:id="allePersonenLoeschenMenuItem" onAction="#onAllePersonenLoeschen" text="Alle Personen lÃ¶schen" />
               <MenuItem fx:id="alleDienstplaeneLoeschenMenuItem" onAction="#onAlleDienstplaeneLoeschen" text="Alle DienstplÃ¤ne lÃ¶schen" />
            </Menu>
            
            <Menu text="Ansicht">
               <CheckMenuItem fx:id="statusleisteMenuItem" onAction="#onStatusleisteToggle" selected="true" text="Statusleiste" />
               <CheckMenuItem fx:id="toolbarMenuItem" onAction="#onToolbarToggle" selected="true" text="Toolbar" />
               <SeparatorMenuItem />
               <MenuItem fx:id="vollbildMenuItem" onAction="#onVollbild" text="Vollbild" />
            </Menu>
            
            <Menu text="Extras">
               <MenuItem fx:id="datenbankInfoMenuItem" onAction="#onDatenbankInfo" text="Datenbank-Informationen" />
               <MenuItem fx:id="testdatenMenuItem" onAction="#onTestdatenErstellen" text="Testdaten erstellen" />
               <MenuItem fx:id="datenbankBackupMenuItem" onAction="#onDatenbankBackup" text="Datenbank-Backup" />
               <SeparatorMenuItem />
               <MenuItem fx:id="logAnzeigenMenuItem" onAction="#onLogAnzeigen" text="Log anzeigen" />
            </Menu>
            
            <Menu text="Hilfe">
               <MenuItem fx:id="hilfeMenuItem" onAction="#onHilfe" text="Hilfe" />
               <MenuItem fx:id="tastaturkuerzelMenuItem" onAction="#onTastaturkuerzel" text="TastaturkÃ¼rzel" />
               <SeparatorMenuItem />
               <MenuItem fx:id="ueberMenuItem" onAction="#onUeber" text="Ãœber Dienstplan-Generator" />
            </Menu>
         </MenuBar>
         
         <!-- Toolbar - AUSGEBLENDET -->
         <ToolBar fx:id="toolBar" prefHeight="50.0" visible="false" managed="false">
            <Button fx:id="neuePersonToolButton" onAction="#onNeuePersonHinzufuegen" 
                    style="-fx-background-color: #4CAF50; -fx-text-fill: white;" 
                    text="ðŸ‘¤ Neue Person" />
            
            <Separator orientation="VERTICAL" />
            
            <Button fx:id="dienstplanErstellenToolButton" onAction="#onNeuerDienstplan" 
                    style="-fx-background-color: #2196F3; -fx-text-fill: white;" 
                    text="ðŸ“… Neuer Dienstplan" />
            
            <Button fx:id="dienstplanGenerierenToolButton" onAction="#onSchnellGenerierung" 
                    style="-fx-background-color: #FF9800; -fx-text-fill: white;" 
                    text="ðŸš€ Schnell-Generierung" />
            
            <Separator orientation="VERTICAL" />
            
            <Button fx:id="statistikenToolButton" onAction="#onStatistikenAnzeigen" 
                    text="ðŸ“Š Statistiken" />
            
            <Button fx:id="exportToolButton" onAction="#onExport" 
                    text="ðŸ’¾ Export" />
            
            <!-- Spacer -->
            <Region HBox.hgrow="ALWAYS" />
            
            <!-- Suchfeld -->
            <Label text="Suche:" />
            <TextField fx:id="globalSuchfeld" onAction="#onGlobalSuche" 
                       prefWidth="200.0" promptText="Global suchen..." />
            <Button fx:id="suchenToolButton" onAction="#onGlobalSuche" text="ðŸ”" />
         </ToolBar>
      </VBox>
   </top>
   
   <center>
      <TabPane fx:id="mainTabPane" tabClosingPolicy="UNAVAILABLE">
         
         <!-- Dashboard Tab -->
         <Tab fx:id="dashboardTab" text="ðŸ“Š Dashboard">
            <ScrollPane fitToWidth="true">
               <VBox spacing="20.0">
                  <padding>
                     <Insets bottom="30.0" left="30.0" right="30.0" top="30.0" />
                  </padding>
                  
                  <!-- Willkommen-Bereich -->
                  <VBox alignment="CENTER" spacing="15.0">
                     <Label style="-fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: #2196F3;" 
                            text="ðŸ¥ Dienstplan-Generator" />
                     <Label style="-fx-font-size: 16px;" 
                            text="Automatische Erstellung und Verwaltung von DienstplÃ¤nen" />
                  </VBox>
                  
                  <Separator />
                  
                  <!-- Schnellzugriff-Karten -->
                  <HBox alignment="CENTER" spacing="20.0">
                     
                     <!-- Personen-Karte -->
                     <VBox alignment="CENTER" spacing="10.0" 
                           style="-fx-background-color: #E8F5E8; -fx-padding: 20px; -fx-background-radius: 10px; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 5, 0, 0, 2);">
                        <Label style="-fx-font-size: 48px;" text="ðŸ‘¥" />
                        <Label style="-fx-font-size: 18px; -fx-font-weight: bold;" text="Personen" />
                        <Label fx:id="dashboardPersonenAnzahl" style="-fx-font-size: 24px; -fx-text-fill: #4CAF50;" text="0" />
                        <Button onAction="#onPersonenverwaltungOeffnen" 
                                style="-fx-background-color: #4CAF50; -fx-text-fill: white;" 
                                text="Verwalten" />
                     </VBox>
                     
                     <!-- DienstplÃ¤ne-Karte -->
                     <VBox alignment="CENTER" spacing="10.0" 
                           style="-fx-background-color: #E3F2FD; -fx-padding: 20px; -fx-background-radius: 10px; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 5, 0, 0, 2);">
                        <Label style="-fx-font-size: 48px;" text="ðŸ“…" />
                        <Label style="-fx-font-size: 18px; -fx-font-weight: bold;" text="DienstplÃ¤ne" />
                        <Label fx:id="dashboardDienstplaeneAnzahl" style="-fx-font-size: 24px; -fx-text-fill: #2196F3;" text="0" />
                        <Button onAction="#onDienstplanerstellungOeffnen" 
                                style="-fx-background-color: #2196F3; -fx-text-fill: white;" 
                                text="Erstellen" />
                     </VBox>
                     
                     <!-- Dienste-Karte -->
                     <VBox alignment="CENTER" spacing="10.0" 
                           style="-fx-background-color: #FFF3E0; -fx-padding: 20px; -fx-background-radius: 10px; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 5, 0, 0, 2);">
                        <Label style="-fx-font-size: 48px;" text="â°" />
                        <Label style="-fx-font-size: 18px; -fx-font-weight: bold;" text="Dienste" />
                        <Label fx:id="dashboardDiensteAnzahl" style="-fx-font-size: 24px; -fx-text-fill: #FF9800;" text="0" />
                        <Button onAction="#onStatistikenOeffnen" 
                                style="-fx-background-color: #FF9800; -fx-text-fill: white;" 
                                text="Statistiken" />
                     </VBox>
                  </HBox>
                  
                  <Separator />
                  
                  <!-- Aktuelle AktivitÃ¤ten - AUSGEBLENDET -->
                  <VBox spacing="15.0" visible="false" managed="false">
                     <Label style="-fx-font-size: 20px; -fx-font-weight: bold;" text="ðŸ“‹ Aktuelle Ãœbersicht" />

                     <GridPane hgap="30.0" vgap="15.0">
                        <columnConstraints>
                           <ColumnConstraints hgrow="ALWAYS" />
                           <ColumnConstraints hgrow="ALWAYS" />
                        </columnConstraints>

                        <!-- Letzte AktivitÃ¤ten -->
                        <VBox spacing="10.0" GridPane.columnIndex="0" GridPane.rowIndex="0">
                           <Label style="-fx-font-size: 16px; -fx-font-weight: bold;" text="ðŸ“ Letzte AktivitÃ¤ten" />
                           <ListView fx:id="aktivitaetenList" prefHeight="200.0" />
                        </VBox>

                        <!-- NÃ¤chste Termine/Aufgaben -->
                        <VBox spacing="10.0" GridPane.columnIndex="1" GridPane.rowIndex="0">
                           <Label style="-fx-font-size: 16px; -fx-font-weight: bold;" text="âš ï¸ BenÃ¶tigt Aufmerksamkeit" />
                           <ListView fx:id="aufgabenList" prefHeight="200.0" />
                        </VBox>
                     </GridPane>
                  </VBox>

                  <Separator visible="false" managed="false" />
                  
                  <!-- Schnellstatistiken -->
                  <VBox spacing="15.0">
                     <Label style="-fx-font-size: 20px; -fx-font-weight: bold;" text="ðŸ“ˆ System-Status" />
                     
                     <GridPane hgap="20.0" vgap="10.0">
                        <columnConstraints>
                           <ColumnConstraints minWidth="150.0" />
                           <ColumnConstraints hgrow="ALWAYS" />
                        </columnConstraints>
                        
                        <Label text="Datenbank:" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                        <Label fx:id="datenbankStatusLabel" style="-fx-text-fill: green;" text="âœ… Verbunden" GridPane.columnIndex="1" GridPane.rowIndex="0" />
                        
                        <Label text="DatenbankgrÃ¶ÃŸe:" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                        <Label fx:id="datenbankGroesseLabel" text="Laden..." GridPane.columnIndex="1" GridPane.rowIndex="1" />
                        
                        <Label text="Letzte Sicherung:" GridPane.columnIndex="0" GridPane.rowIndex="2" />
                        <Label fx:id="letzteSicherungLabel" text="Nie" GridPane.columnIndex="1" GridPane.rowIndex="2" />
                        
                        <Label text="Anwendungsversion:" GridPane.columnIndex="0" GridPane.rowIndex="3" />
                        <Label fx:id="versionLabel" text="1.0.0" GridPane.columnIndex="1" GridPane.rowIndex="3" />
                     </GridPane>
                  </VBox>
               </VBox>
            </ScrollPane>
         </Tab>
         
         <!-- Personenverwaltung Tab -->
         <Tab fx:id="personenverwaltungTab" text="ðŸ‘¥ Personen">
            <fx:include fx:id="personenverwaltungView" source="personenverwaltung.fxml" />
         </Tab>
         
         <!-- Dienstplanerstellung Tab -->
         <Tab fx:id="dienstplanerstellungTab" text="ðŸ“… DienstplÃ¤ne">
            <fx:include fx:id="dienstplanerstellungView" source="dienstplanerstellung.fxml" />
         </Tab>
         
         <!-- Statistiken Tab -->
         <Tab fx:id="statistikenTab" text="ðŸ“Š Statistiken">
            <fx:include fx:id="statistikenView" source="statistiken.fxml" />
         </Tab>
         
      </TabPane>
   </center>
   
   <bottom>
      <HBox fx:id="statusLeiste" alignment="CENTER_LEFT" spacing="15.0">
         <padding>
            <Insets bottom="8.0" left="15.0" right="15.0" top="8.0" />
         </padding>
         
         <Label fx:id="hauptStatusLabel" text="Dienstplan-Generator bereit" />
         
         <!-- Spacer -->
         <Region HBox.hgrow="ALWAYS" />
         
         <Separator orientation="VERTICAL" />
         
         <Label fx:id="personenStatusLabel" text="0 Personen" />
         
         <Separator orientation="VERTICAL" />
         
         <Label fx:id="dienstplaeneStatusLabel" text="0 DienstplÃ¤ne" />
         
         <Separator orientation="VERTICAL" />
         
         <Label fx:id="uhrzeitLabel" text="Laden..." />
      </HBox>
   </bottom>
</BorderPane>