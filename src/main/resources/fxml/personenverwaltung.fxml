<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx/17.0.2-ea" xmlns:fx="http://javafx.com/fxml/1" fx:controller="de.dienstplan.controller.PersonenverwaltungController">
   <top>
      <VBox spacing="8.0">
         <padding>
            <Insets bottom="8.0" left="15.0" right="15.0" top="10.0" />
         </padding>

         <!-- Suchbereich -->
         <HBox alignment="CENTER_LEFT" spacing="10.0">
            <TextField fx:id="suchfeld" promptText="Name suchen..." prefWidth="200.0" />
            <Button fx:id="suchenButton" onAction="#onSuchen" styleClass="btn-outline-secondary" text="Suchen" />
            <Button fx:id="alleAnzeigenButton" onAction="#onAlleAnzeigen" styleClass="btn-outline-secondary" text="Alle" />
            <Region HBox.hgrow="ALWAYS" />
            <Button fx:id="neuePersonButton" onAction="#onNeuePersonErstellen" styleClass="btn-primary" text="+ Neue Person" />
         </HBox>
      </VBox>
   </top>
   
   <center>
      <SplitPane dividerPositions="0.6" orientation="HORIZONTAL">
         
         <!-- Linke Seite: Personenliste -->
         <VBox spacing="10.0">
            <padding>
               <Insets bottom="20.0" left="20.0" right="10.0" top="10.0" />
            </padding>
            
            <Label style="-fx-font-size: 16px; -fx-font-weight: bold;" text="Personen" />
            
            <TableView fx:id="personenTabelle" VBox.vgrow="ALWAYS">
               <columns>
                  <TableColumn fx:id="nameColumn" prefWidth="150.0" text="Name" />
                  <TableColumn fx:id="dienstanzahlColumn" prefWidth="90.0" text="Dienste/Monat" />
                  <TableColumn fx:id="arbeitstagColumn" prefWidth="120.0" text="Arbeitstage" />
                  <TableColumn fx:id="dienstartColumn" prefWidth="120.0" text="Dienstarten" />
               </columns>
               <columnResizePolicy>
                  <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
               </columnResizePolicy>
            </TableView>
            
            <!-- Buttons für Personenliste -->
            <HBox spacing="10.0">
               <Button fx:id="loeschenButton" disable="true" onAction="#onPersonLoeschen" styleClass="btn-danger" text="Löschen" />
               <Region HBox.hgrow="ALWAYS" />
               <Label fx:id="anzahlLabel" styleClass="text-muted" text="0 Personen" />
            </HBox>
         </VBox>
         
         <!-- Rechte Seite: Person Details/Formular -->
         <VBox spacing="15.0" style="-fx-text-fill: black;">
            <padding>
               <Insets bottom="20.0" left="10.0" right="20.0" top="10.0" />
            </padding>

            <Label fx:id="formularTitel" style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: black;" text="Person Details" />
            
            <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS">
               <VBox spacing="15.0">
                  <padding>
                     <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
                  </padding>
                  
                  <!-- Grunddaten -->
                  <VBox spacing="8.0">
                     <Label style="-fx-font-weight: bold; -fx-text-fill: black;" text="Grunddaten" />
                     
                     <HBox alignment="CENTER_LEFT" spacing="10.0">
                        <Label minWidth="120.0" text="Name:" style="-fx-text-fill: black;" />
                        <TextField fx:id="nameField" prefWidth="200.0" />
                     </HBox>

                     <HBox alignment="CENTER_LEFT" spacing="10.0">
                        <Label minWidth="120.0" text="Anzahl Dienste:" style="-fx-text-fill: black;" />
                        <Spinner fx:id="anzahlDiensteSpinner" editable="true" prefWidth="100.0" />
                     </HBox>
                  </VBox>
                  
                  <Separator />
                  
                  <!-- Arbeitstage -->
                  <VBox spacing="10.0">
                     <Label styleClass="subtitle" style="-fx-font-size: 14px; -fx-text-fill: black;" text="Arbeitstage" />

                     <!-- Wochentage in einer Reihe -->
                     <HBox spacing="8.0" alignment="CENTER_LEFT">
                        <VBox alignment="CENTER" spacing="2.0" prefWidth="45">
                           <Label text="Mo" style="-fx-font-size: 11px; -fx-text-fill: black;" />
                           <CheckBox fx:id="montagCheck" />
                        </VBox>
                        <VBox alignment="CENTER" spacing="2.0" prefWidth="45">
                           <Label text="Di" style="-fx-font-size: 11px; -fx-text-fill: black;" />
                           <CheckBox fx:id="dienstagCheck" />
                        </VBox>
                        <VBox alignment="CENTER" spacing="2.0" prefWidth="45">
                           <Label text="Mi" style="-fx-font-size: 11px; -fx-text-fill: black;" />
                           <CheckBox fx:id="mittwochCheck" />
                        </VBox>
                        <VBox alignment="CENTER" spacing="2.0" prefWidth="45">
                           <Label text="Do" style="-fx-font-size: 11px; -fx-text-fill: black;" />
                           <CheckBox fx:id="donnerstagCheck" />
                        </VBox>
                        <VBox alignment="CENTER" spacing="2.0" prefWidth="45">
                           <Label text="Fr" style="-fx-font-size: 11px; -fx-text-fill: black;" />
                           <CheckBox fx:id="freitagCheck" />
                        </VBox>
                        <VBox alignment="CENTER" spacing="2.0" prefWidth="45">
                           <Label text="Sa" style="-fx-font-size: 11px; -fx-text-fill: black;" />
                           <CheckBox fx:id="samstagCheck" />
                        </VBox>
                        <VBox alignment="CENTER" spacing="2.0" prefWidth="45">
                           <Label text="So" style="-fx-font-size: 11px; -fx-text-fill: black;" />
                           <CheckBox fx:id="sonntagCheck" />
                        </VBox>
                     </HBox>

                     <HBox spacing="8.0">
                        <Button fx:id="alleWochentagButton" onAction="#onAlleWochentageWaehlen"
                                styleClass="btn-outline-secondary" style="-fx-font-size: 12px; -fx-padding: 5 10;"
                                text="Alle" />
                        <Button fx:id="keineWochentagButton" onAction="#onKeineWochentageWaehlen"
                                styleClass="btn-outline-secondary" style="-fx-font-size: 12px; -fx-padding: 5 10;"
                                text="Keine" />
                        <Button fx:id="wocheButton" onAction="#onWocheWaehlen"
                                styleClass="btn-outline-secondary" style="-fx-font-size: 12px; -fx-padding: 5 10;"
                                text="Mo-Fr" />
                     </HBox>
                  </VBox>

                  <Separator />

                  <!-- Dienstarten -->
                  <VBox spacing="10.0">
                     <Label styleClass="subtitle" style="-fx-font-size: 14px; -fx-text-fill: black;" text="Verfügbare Dienstarten" />

                     <!-- Dienstarten horizontal -->
                     <HBox spacing="20.0" alignment="CENTER_LEFT">
                        <CheckBox fx:id="dienst24hCheck" text="24h" />
                        <CheckBox fx:id="vistenCheck" text="Visten" />
                        <CheckBox fx:id="davinciCheck" text="DaVinci" />
                     </HBox>

                     <HBox spacing="8.0">
                        <Button fx:id="alleDienstartButton" onAction="#onAlleDienstartenWaehlen"
                                styleClass="btn-outline-secondary" style="-fx-font-size: 12px; -fx-padding: 5 10;"
                                text="Alle" />
                        <Button fx:id="keineDienstartButton" onAction="#onKeineDienstartenWaehlen"
                                styleClass="btn-outline-secondary" style="-fx-font-size: 12px; -fx-padding: 5 10;"
                                text="Keine" />
                     </HBox>
                  </VBox>
                  
                  <!-- Hinweis: Abwesenheiten/Wünsche werden per Excel importiert -->
               </VBox>
            </ScrollPane>
            
            <Separator />
            
            <!-- Aktionsbuttons -->
            <HBox spacing="10.0">
               <Button fx:id="speichernButton" disable="true" onAction="#onSpeichern" styleClass="btn-secondary" text="Speichern" />
               <Button fx:id="abbrechenButton" onAction="#onAbbrechen" styleClass="btn-outline-secondary" text="Abbrechen" />
            </HBox>
         </VBox>
      </SplitPane>
   </center>
   
   <bottom>
      <HBox alignment="CENTER_LEFT" spacing="10.0">
         <padding>
            <Insets bottom="10.0" left="20.0" right="20.0" top="10.0" />
         </padding>
         <Label fx:id="statusLabel" text="Bereit" />
         <Region HBox.hgrow="ALWAYS" />
         <Label fx:id="datenbankStatusLabel" text="Datenbank: Nicht verbunden" />
      </HBox>
   </bottom>
</BorderPane>