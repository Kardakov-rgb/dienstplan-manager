<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx/17.0.2-ea" xmlns:fx="http://javafx.com/fxml/1" fx:controller="de.dienstplan.controller.PersonenverwaltungController">
   <top>
      <VBox spacing="10.0">
         <padding>
            <Insets bottom="10.0" left="20.0" right="20.0" top="20.0" />
         </padding>
         
         <!-- Überschrift -->
         <Label style="-fx-font-size: 24px; -fx-font-weight: bold;" text="Personenverwaltung" />
         
         <!-- Suchbereich -->
         <HBox alignment="CENTER_LEFT" spacing="10.0">
            <TextField fx:id="suchfeld" promptText="Name suchen..." prefWidth="200.0" />
            <Button fx:id="suchenButton" onAction="#onSuchen" text="Suchen" />
            <Button fx:id="alleAnzeigenButton" onAction="#onAlleAnzeigen" text="Alle anzeigen" />
            <Region HBox.hgrow="ALWAYS" />
            <Button fx:id="neuePersonButton" onAction="#onNeuePersonErstellen" style="-fx-background-color: #4CAF50; -fx-text-fill: white;" text="+ Neue Person" />
         </HBox>
      </VBox>
   </top>
   
   <center>
      <SplitPane dividerPositions="0.6" orientation="HORIZONTAL">
         
         <!-- Linke Seite: Personenliste -->
         <VBox spacing="10.0">
            <padding>
               <Insets bottom="20.0" left="20.0" right="10.0" top="10.0" />
            </padding>
            
            <Label style="-fx-font-size: 16px; -fx-font-weight: bold;" text="Personen" />
            
            <TableView fx:id="personenTabelle" VBox.vgrow="ALWAYS">
               <columns>
                  <TableColumn fx:id="nameColumn" prefWidth="150.0" text="Name" />
                  <TableColumn fx:id="dienstanzahlColumn" prefWidth="80.0" text="Dienste" />
                  <TableColumn fx:id="arbeitstagColumn" prefWidth="120.0" text="Arbeitstage" />
                  <TableColumn fx:id="dienstartColumn" prefWidth="120.0" text="Dienstarten" />
               </columns>
               <columnResizePolicy>
                  <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
               </columnResizePolicy>
            </TableView>
            
            <!-- Buttons für Personenliste -->
            <HBox spacing="10.0">
               <Button fx:id="bearbeitenButton" disable="true" onAction="#onPersonBearbeiten" text="Bearbeiten" />
               <Button fx:id="loeschenButton" disable="true" onAction="#onPersonLoeschen" style="-fx-background-color: #f44336; -fx-text-fill: white;" text="Löschen" />
               <Region HBox.hgrow="ALWAYS" />
               <Label fx:id="anzahlLabel" text="0 Personen" />
            </HBox>
         </VBox>
         
         <!-- Rechte Seite: Person Details/Formular -->
         <VBox spacing="15.0">
            <padding>
               <Insets bottom="20.0" left="10.0" right="20.0" top="10.0" />
            </padding>
            
            <Label fx:id="formularTitel" style="-fx-font-size: 16px; -fx-font-weight: bold;" text="Person Details" />
            
            <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS">
               <VBox spacing="15.0">
                  <padding>
                     <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
                  </padding>
                  
                  <!-- Grunddaten -->
                  <VBox spacing="8.0">
                     <Label style="-fx-font-weight: bold;" text="Grunddaten" />
                     
                     <HBox alignment="CENTER_LEFT" spacing="10.0">
                        <Label minWidth="120.0" text="Name:" />
                        <TextField fx:id="nameField" prefWidth="200.0" />
                     </HBox>
                     
                     <HBox alignment="CENTER_LEFT" spacing="10.0">
                        <Label minWidth="120.0" text="Anzahl Dienste:" />
                        <Spinner fx:id="anzahlDiensteSpinner" editable="true" prefWidth="100.0" />
                     </HBox>
                  </VBox>
                  
                  <Separator />
                  
                  <!-- Arbeitstage -->
                  <VBox spacing="8.0">
                     <Label style="-fx-font-weight: bold;" text="Arbeitstage" />
                     
                     <VBox spacing="5.0">
                        <CheckBox fx:id="montagCheck" text="Montag" />
                        <CheckBox fx:id="dienstagCheck" text="Dienstag" />
                        <CheckBox fx:id="mittwochCheck" text="Mittwoch" />
                        <CheckBox fx:id="donnerstagCheck" text="Donnerstag" />
                        <CheckBox fx:id="freitagCheck" text="Freitag" />
                        <CheckBox fx:id="samstagCheck" text="Samstag" />
                        <CheckBox fx:id="sonntagCheck" text="Sonntag" />
                     </VBox>
                     
                     <HBox spacing="10.0">
                        <Button fx:id="alleWochentagButton" onAction="#onAlleWochentageWaehlen" text="Alle wählen" />
                        <Button fx:id="keineWochentagButton" onAction="#onKeineWochentageWaehlen" text="Keine wählen" />
                        <Button fx:id="wocheButton" onAction="#onWocheWaehlen" text="Mo-Fr" />
                     </HBox>
                  </VBox>
                  
                  <Separator />
                  
                  <!-- Dienstarten -->
                  <VBox spacing="8.0">
                     <Label style="-fx-font-weight: bold;" text="Verfügbare Dienstarten" />
                     
                     <VBox spacing="5.0">
                        <CheckBox fx:id="dienst24hCheck" text="24h Dienst" />
                        <CheckBox fx:id="vistenCheck" text="Visten" />
                        <CheckBox fx:id="davinciCheck" text="DaVinci (nur freitags)" />
                     </VBox>
                     
                     <HBox spacing="10.0">
                        <Button fx:id="alleDienstartButton" onAction="#onAlleDienstartenWaehlen" text="Alle wählen" />
                        <Button fx:id="keineDienstartButton" onAction="#onKeineDienstartenWaehlen" text="Keine wählen" />
                     </HBox>
                  </VBox>
                  
                  <!-- Hinweis: Abwesenheiten/Wünsche werden per Excel importiert -->
               </VBox>
            </ScrollPane>
            
            <Separator />
            
            <!-- Aktionsbuttons -->
            <HBox spacing="10.0">
               <Button fx:id="speichernButton" disable="true" onAction="#onSpeichern" style="-fx-background-color: #2196F3; -fx-text-fill: white;" text="Speichern" />
               <Button fx:id="abbrechenButton" onAction="#onAbbrechen" text="Abbrechen" />
               <Region HBox.hgrow="ALWAYS" />
               <Button fx:id="zuruecksetzenButton" disable="true" onAction="#onZuruecksetzen" text="Zurücksetzen" />
            </HBox>
         </VBox>
      </SplitPane>
   </center>
   
   <bottom>
      <HBox alignment="CENTER_LEFT" spacing="10.0">
         <padding>
            <Insets bottom="10.0" left="20.0" right="20.0" top="10.0" />
         </padding>
         <Label fx:id="statusLabel" text="Bereit" />
         <Region HBox.hgrow="ALWAYS" />
         <Label fx:id="datenbankStatusLabel" text="Datenbank: Nicht verbunden" />
      </HBox>
   </bottom>
</BorderPane>